<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{{.Title}}</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="author" content="Edward Hesketh" />
        <meta name="description" content="{{index .Page "description"}}" />
        <link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml">

        {{if index .Page "containsEmail"}}
        <script>
            document.addEventListener("DOMContentLoaded",(function(){
                let allElements = document.getElementsByClassName("email");
                for (var i = 0; i < allElements.length; i++) {
                  let element = allElements[i];
                  let output = "";
                  for (let count = 0; count < element.textContent.length; count += 2) {
                    output += String.fromCharCode(20 ^ parseInt(element.textContent.substr(count, 2), 16));
                  }
                  element.innerHTML = output; 
                  element.href = "mailto:" + output;
                }
            }));
        </script>
        {{end}}

        <script>
window.addEventListener("load", () => {
    const spotlight = document.querySelector('#spotlight');
    let spotlightSize = 'transparent 1%, rgba(0, 0, 0, 0.8) 60%';

    spotlight.style.backgroundColor = window.getComputedStyle(document.body).getPropertyValue("background-color");

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        const newColorScheme = event.matches ? "dark" : "light";
        spotlight.style.backgroundColor = window.getComputedStyle(document.body).getPropertyValue("background-color");
    });

    let delay = 50;
    window.addEventListener('mousemove', e => {
        setTimeout(() => {
            spotlight.style.maskImage = `radial-gradient(circle at ${e.screenX / window.innerWidth * 100}% ${e.screenY / window.innerHeight * 100}%, ${spotlightSize}`;
        }, delay);
    });
});
        </script>

        <link rel="stylesheet" href="/shared.css" />
    </head>
    <body style="min-height: 100vh; font-family: system-ui, sans-serif; margin:0px;">
        <div style="position: fixed; z-index: -1; width: 100vw; height:100vh;" id="spotlight"></div>
        <header style="padding: 10px; margin: 0px;">
            <nav style="width: 1200px; max-width: 100%; margin: auto;">
                <a href="/" style="font-size:2em; text-decoration: none; font-weight: 700;" class="title-link">edwardh.dev</a>
                <br />
                <small>{{.Path}}</small>
            </nav>
        </header>
        <article style="padding:8px; padding-left: 16px; padding-right: 16px; width: 1200px; max-width: 100vw; margin-left: auto; margin-right: auto; box-sizing: border-box;">
            {{.Body}}
        </article>
        <footer style="padding: 10px; margin: 0px;">
            <div style="width: 1200px; max-width: 100%; margin: auto;">
                        <small>Written in plain HTML.</small>
                        <br />
                            <small>Content on this site is licenced under a <a href="https://creativecommons.org/licenses/by-nd/4.0/">Creative Commons Attribution-NoDerivatives 4.0 International licence</a>.</small>
            </div>
        </footer>
    </body>
</html>
